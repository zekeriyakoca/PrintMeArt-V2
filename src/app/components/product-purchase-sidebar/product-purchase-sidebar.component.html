<section class="purchase-sidebar">
  <!-- Price -->
  <div class="price-block">
    @if (hasAllOptionsSelected()) {
    <span class="price">{{ calculatedPrice() | currency:'EUR':'symbol':'1.2-2' }}</span>
    } @else {
    <span class="price-hint">From</span>
    <span class="price">{{ product().cheapestPrice | currency:'EUR':'symbol':'1.2-2' }}</span>
    }
  </div>

  <!-- Options -->
  @for (group of this.product().optionGroups; track group.name; let groupIndex = $index) {
  <div class="option-group">
    <label class="option-label">{{ group.name }}</label>
    @if(group.name.toLowerCase() == 'frame'){
    <app-frame-options [group]="group" (optionSelected)="selectOption(groupIndex,$event)"></app-frame-options>
    }
    @else if(group.name.toLowerCase() == 'including mat'){
    <app-mat-options [(isMatIncluded)]="isMatIncluded"></app-mat-options>
    }
    @else if(group.name.toLowerCase() == 'size'){
    <app-size-options [sizes]="SizeOptions" [(sizeSelected)]="selectedSize"></app-size-options>
    }
    @else{
    <app-options [group]="group" (optionSelected)="selectOption(groupIndex,$event)"></app-options>
    }
  </div>
  }

  <!-- Trust points -->
  <ul class="trust-list">
    <li class="trust-item">
      <span class="trust-check">✓</span>
      <span>Great value for money</span>
    </li>
    <li class="trust-item">
      <span class="trust-check">✓</span>
      <span>14-day money-back guarantee</span>
    </li>
  </ul>

  <!-- Add to cart -->
  <button type="button" [class.disabled]="!hasAllOptionsSelected()" [disabled]="!hasAllOptionsSelected()"
    (click)="addToCart()" class="add-to-cart-btn">
    <app-icon iconName="cart"></app-icon>
    <span>Add to cart</span>
  </button>

  <!-- Quality badges -->
  <div class="badges">
    <div class="badge">
      <div class="badge-icon">
        <img src="//bearforeststudio.com/cdn/shop/files/palette_1.svg?v=1728327928" alt="" loading="lazy" />
      </div>
      <span class="badge-text">Museum-quality prints</span>
    </div>
    <div class="badge">
      <div class="badge-icon">
        <img src="//bearforeststudio.com/cdn/shop/files/recycle.svg?v=1728327994" alt="" loading="lazy" />
      </div>
      <span class="badge-text">Premium 200 g/m² mat paper</span>
    </div>
  </div>
</section>
