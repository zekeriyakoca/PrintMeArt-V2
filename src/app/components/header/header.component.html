<header class="inset-x-0 top-0 z-50 nc-Header sticky top-0 w-full left-0 right-0 z-40 bg-white">
  <div class="bg-white">
    <div class="container">
      <div class="h-20 flex justify-between">
        <!-- Logo section -->
        <div class="flex items-center lg:flex-1">
          <a href="/" class="ttnc-logo inline-block text-slate-600 flex-shrink-0">
            <img class="block h-8 sm:h-10 w-auto"
              src="https://genstorageaccount3116.blob.core.windows.net/printme-images/logo.svg" alt="PrintMeArt Logo">
          </a>
        </div>

        <!-- Desktop Navigation -->
        <div class="hidden lg:flex lg:items-center lg:space-x-10">
          <!-- Main Navigation -->
          <nav class="flex items-center space-x-8">
            <ul class="nc-Navigation flex items-center">
              <!-- Prints Mega Menu -->
              <li class="menu-item flex-shrink-0 menu-megamenu menu-megamenu--large"
                (mouseenter)="showDropdown('prints')" (mouseleave)="hideDropdown('prints')">
                <a href="/search"
                  class="inline-flex items-center text-sm lg:text-[.9rem] font-medium text-slate-700 py-2.5 px-4 xl:px-5 rounded-full hover:text-slate-900 hover:bg-slate-100">
                  Our Catalog
                </a>
                <!-- Prints Mega Menu -->
                <div class="invisible sub-menu absolute top-full inset-x-0 transform z-50"
                  [class.visible]="activeDropdown === 'prints'">
                  <div class="bg-white shadow-lg">
                    <div class="container">
                      <div class="flex text-sm border-t border-slate-200 py-14">
                        <div class="flex-1 grid grid-cols-4 gap-6 xl:gap-8 pr-6 xl:pr-8">
                          @for (category of printCategories(); track category.id) {
                          <div>
                            <p class="font-medium text-slate-900">{{ category.name }}</p>
                            <ul class="grid space-y-4 mt-4">
                              @for (child of category.childCategories; track child.id) {
                              <li><a class="font-normal text-slate-600 hover:text-black"
                                  [href]="'/products?categoryName=' + encodeURIComponent(child.name)">{{ child.name
                                  }}</a>
                              </li>
                              }
                            </ul>
                          </div>
                          }
                        </div>
                        <!-- Right side card -->
                        <div class="w-[40%] xl:w-[35%] max-w-[450px]">
                          <div class="relative w-full h-48 sm:h-52 md:h-56 rounded-2xl overflow-hidden group">
                            <div class="absolute flex flex-col h-full w-full p-8 z-40 ">
                              <img
                                src="https://genstorageaccount3116.blob.core.windows.net/printme-images/coffee-invitation.webp"
                                class="absolute end-0 w-1/2 max-w-[260px] h-full object-contain drop-shadow-xl"
                                alt="Visit Our Space">
                              <div class="max-w-xs">
                                <span class="block mb-2 text-sm text-slate-700">
                                  Visit Our Space
                                </span>
                                <h2 class="text-md md:text-lg lg:text-2xl text-slate-900 font-semibold">
                                  Pick up prints,<br />enjoy coffee.
                                </h2>
                              </div>
                              <div class="mt-auto">
                                <button
                                  class="py-3 px-4 sm:py-3.5 sm:px-6 text-sm font-medium bg-white border border-neutral-200 text-neutral-700 rounded-full hover:bg-neutral-50 transition-colors cursor-pointer drop-shadow-xl">
                                  Show me all
                                </button>
                              </div>
                            </div>
                            <span
                              class="opacity-0 group-hover:opacity-40 absolute inset-0 bg-black/10 transition-opacity"></span>
                            <div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </li>

              <!-- Your Design (special styling, no submenu) -->
              <li class="menu-item flex-shrink-0">
                <a href="/your-design"
                  class="inline-flex items-center text-sm lg:text-[.9rem] font-medium py-2.5 px-4 xl:px-5 rounded-full hover:text-slate-900 hover:bg-slate-100"
                  style="color: #db2877; font-family: fantasy; font-size: 1.09rem;">
                  Your Design
                </a>
              </li>

              <!-- Frames -->
              <li class="menu-item flex-shrink-0">
                <a href="/frames"
                  class="inline-flex items-center text-sm lg:text-[.9rem] font-medium text-slate-700 py-2.5 px-4 xl:px-5 rounded-full hover:text-slate-900 hover:bg-slate-100">
                  Frames
                </a>
              </li>

              <!-- About -->
              <li class="menu-item flex-shrink-0">
                <a href="/about"
                  class="inline-flex items-center text-sm lg:text-[.9rem] font-medium text-slate-700 py-2.5 px-4 xl:px-5 rounded-full hover:text-slate-900 hover:bg-slate-100">
                  About
                </a>
              </li>
            </ul>
          </nav>

          <!-- Right side icons -->
          <div class="flex items-center space-x-1">
            <!-- Search Icon -->
            <button type="button" (click)="navigateToSearch()"
              class="hidden lg:flex w-10 h-10 sm:w-12 sm:h-12 rounded-full text-slate-700 hover:bg-slate-100 focus:outline-none items-center justify-center">
              <app-icon iconName="search" class="w-[22px] h-[22px]"></app-icon>
            </button>

            <!-- Profile/User Icon -->
            <app-user-menu></app-user-menu>

            <!-- Cart Icon with Badge -->
            <button type="button"
              class="relative flex w-10 h-10 sm:w-12 sm:h-12 rounded-full text-slate-700 hover:bg-slate-100 focus:outline-none items-center justify-center"
              (click)="navigateToCart()">
              <app-icon iconName="shopping-cart" class="w-6 h-6"></app-icon>
              <!-- Cart Badge -->
              @if(totalItemCountInCart() > 0){
              <span
                class="absolute -top-2 -right-2 w-5 h-5 bg-indigo-600 text-white text-xs rounded-full flex items-center justify-center transform scale-75">
                {{ totalItemCountInCart() }}
              </span>
              }

            </button>

            <!-- Language Dropdown -->
            <div class="hidden xl:block h-6 border-l border-neutral-300 ml-3"></div>
            <div class="hidden xl:flex">
              <app-language-dropdown></app-language-dropdown>
            </div>
          </div>
        </div>

        <!-- Mobile menu button -->
        <div class="flex items-center lg:hidden">
          <button type="button"
            class="focus:outline-none focus:ring-2 focus:ring-inset focus:ring-indigo-500 inline-flex items-center justify-center rounded-md p-2.5 text-slate-700"
            (click)="toggleMobileMenu()">
            <span class="sr-only">Open main menu</span>
            @if(!isMobileMenuOpen()) {
            <app-icon iconName="menu" class="block h-6 w-6"></app-icon>
            }

            @else if(isMobileMenuOpen()) {
            <app-icon iconName="close" class="block h-6 w-6"></app-icon>
            }

          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Mobile menu -->
  @if(isMobileMenuOpen()){
  <div class="lg:hidden fixed inset-0 z-50 bg-white" role="dialog" aria-modal="true">
    <div class="fixed inset-y-0 right-0 z-50 w-full overflow-y-auto bg-white px-6 py-6 sm:max-w-sm">
      <!-- Mobile menu header -->
      <div class="flex items-center justify-between">
        <a href="#" class="ttnc-logo inline-block text-slate-600">
          <img class="block h-8 w-auto" src="assets/logo.svg" alt="PrintMeArt Logo">
        </a>
        <button type="button" class="-m-2.5 rounded-md p-2.5 text-slate-700" (click)="toggleMobileMenu()">
          <span class="sr-only">Close menu</span>
          <app-icon iconName="close" class="h-6 w-6"></app-icon>
        </button>
      </div>

      <!-- Mobile menu content -->
      <div class="mt-6 flow-root">
        <div class="-my-6 divide-y divide-gray-500/10">
          <div class="space-y-2 py-6">
            <a href="/search"
              class="-mx-3 block rounded-lg px-3 py-2 text-base font-semibold leading-7 text-gray-900 hover:bg-gray-50"
              (click)="toggleMobileMenu()">
              Our Catalog
            </a>
            <a href="/your-design"
              class="-mx-3 block rounded-lg px-3 py-2 text-base font-semibold leading-7 hover:bg-gray-50"
              style="color: #db2877;" (click)="toggleMobileMenu()">
              Your Design
            </a>
            <a href="/frames"
              class="-mx-3 block rounded-lg px-3 py-2 text-base font-semibold leading-7 text-gray-900 hover:bg-gray-50"
              (click)="toggleMobileMenu()">
              Frames
            </a>
            <a href="/about"
              class="-mx-3 block rounded-lg px-3 py-2 text-base font-semibold leading-7 text-gray-900 hover:bg-gray-50"
              (click)="toggleMobileMenu()">
              About
            </a>
          </div>
          <div class="py-6">
            <button type="button"
              class="-mx-3 block rounded-lg px-3 py-2.5 text-base font-semibold leading-7 text-gray-900 hover:bg-gray-50 w-full text-left"
              (click)="navigateToCart(); toggleMobileMenu()">
              Cart ({{ totalItemCountInCart() }})
            </button>
            <button type="button"
              class="-mx-3 block rounded-lg px-3 py-2.5 text-base font-semibold leading-7 text-gray-900 hover:bg-gray-50 w-full text-left mt-2"
              (click)="toggleMobileMenu()">
              Profile
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
  }

</header>
